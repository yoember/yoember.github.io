<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"> <title>The Best Way to Install Node.js with Yarn - yoember.com</title> <meta name="description" content="There are a few ways to install Node.js, but it looks like only one way gives you the best experience for long term. Please find a few tips below how could y..."> <meta name="google-site-verification" content="U42b-ZgXzrF6rhQTCtbrmiSvRBUigl0IoHE-5bhz64c"/> <link rel="canonical" href="/nodejs/the-best-way-to-install-node-js-with-yarn/"> <link rel="alternate" type="application/rss+xml" title="Ember.js v3 Tutorial - Building a complex web application" href="/feed.xml"> <link rel="icon" href="/favicon.png?678"> <link rel="stylesheet" href="/css/styles.css"> </head> <body data-identifier="install-nodejs"> <header> <nav class="navbar navbar-dark bg-primary mb-4 py-4 blog-masthead"> <div class="container"> <div class="navbar-nav"> <a class="navbar-brand" href="https://yoember.com" aria-label="Emberjs tutorial">yoember.com</a> </div> </div> </nav> </header> <div class="container"> <article class="post" itemscope itemtype="http://schema.org/BlogPosting"> <header class="post-header"> <h1 class="post-title" itemprop="name headline">The Best Way to Install Node.js with Yarn</h1> <p class="post-meta"><time datetime="2019-10-28T18:46:00+13:00" itemprop="datePublished">Oct 28, 2019</time> • <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Zoltan</span></span></p> </header> <div class="post-content" itemprop="articleBody"> <p>There are a few ways to install Node.js, but it looks like only one way gives you the best experience for long term. Please find a few tips below how could you <a href="#advance-tips-to-setup-yarn">setup Yarn</a> as well.</p> <h3 id="on-mac">On Mac</h3> <p>The best way to install Node.js on Mac is <code class="highlighter-rouge">nvm</code>.</p> <p><a href="https://github.com/creationix/nvm">https://github.com/creationix/nvm</a></p> <p>You have to have on your Mac the Command Line Tools. Either you install the full XCode from App Store or just use the small Command Line Tools installer:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ xcode-select --install
</code></pre></div></div> <p>(If you’ve just installed XCode, don’t forget to launch it first and accepting the Terms and Conditions.)</p> <p>You can use the install script for <code class="highlighter-rouge">nvm</code> installation.</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.0/install.sh | bash
</code></pre></div></div> <p>However, I would encourage you to use the manual installation process. Nothing special there. Firstly, you just clone the whole repo in a subfolder in your home directory. (<code class="highlighter-rouge">~/.nvm</code>) Secondly, you add two extra lines to your console script (to <code class="highlighter-rouge">~/.zshrc</code> or <code class="highlighter-rouge">~/.bashrc</code>).</p> <p>Please follow these steps on NVM Readme: <a href="https://github.com/creationix/nvm#git-install">https://github.com/creationix/nvm#git-install</a></p> <p>You have to relaunch your Terminals. Maybe you have to log out and log back to activate the new settings.</p> <p>List your installed node versions:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ nvm list
</code></pre></div></div> <p>List the available node versions in the cloud:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ nvm ls-remote
</code></pre></div></div> <p>You can use the combination of this two commands to see only the last 9 lines from the huge list of versions:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ nvm ls-remote | tail -n9
</code></pre></div></div> <p>It is safe if you choose one of the most recent LTS (long time support) version and install it with the following command:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ nvm install 12.13.0
</code></pre></div></div> <p>Setup this version as the default.</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ nvm use 12.13.0
$ nvm alias default 12.13.0
</code></pre></div></div> <p>Check your node version with</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ node -v
</code></pre></div></div> <p>You should see <code class="highlighter-rouge">v12.13.0</code> if you installed the above version.</p> <p>You can update your <code class="highlighter-rouge">npm</code> to the latest.</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ npm install -g npm
</code></pre></div></div> <p>After the update, the npm version, <code class="highlighter-rouge">npm -v</code>, should be at least <code class="highlighter-rouge">6.12.0</code> or above.</p> <p>A little extra tip. Remember for the following command because it simplifies the update process. ;)</p> <p>Let’s say, you would like to stay on the stable, LTS version and you would like to keep all the global package what you’ve already installed. Here is the solution:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ nvm install 12 --reinstall-packages-from=12 --latest-npm
</code></pre></div></div> <p>It updates your Node.js version to the latest version 12 and install the latest npm, plus it setup all your previously installed global packages.</p> <p>Alternatives for installing Node.js, but not suggested:</p> <ul> <li>Official Installer: <a href="https://nodejs.org/en/download/">https://nodejs.org/en/download/</a></li> <li>Using brew: <a href="https://nodejs.org/en/download/package-manager/#osx">https://nodejs.org/en/download/package-manager/#osx</a></li> </ul> <h4 id="advanced-tips-for-setting-up-yarn">Advanced tips for setting up <code class="highlighter-rouge">yarn</code></h4> <p>I use the following steps to keep <code class="highlighter-rouge">yarn</code> up to date and use only <code class="highlighter-rouge">yarn</code> global installer instead of <code class="highlighter-rouge">npm</code>, so if a Node.js package is installed globally there won’t be any surprise and version mismatch in the future.</p> <p>First of all check out that your <code class="highlighter-rouge">yarn</code> default global binary folder is part of the standard <code class="highlighter-rouge">$PATH</code>. Usually we don’t have to do anything here, because it should be <code class="highlighter-rouge">/usr/local/bin</code> and it is part of our standard <code class="highlighter-rouge">$PATH</code> list.</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ yarn global bin
/usr/local/bin
$ env | grep PATH
</code></pre></div></div> <p>You can create a shortcut <code class="highlighter-rouge">alias</code> for calling <code class="highlighter-rouge">yarn</code> command only with <code class="highlighter-rouge">y</code> in your terminal. Aliases should be placed in your <code class="highlighter-rouge">~/.zshrc</code> or <code class="highlighter-rouge">~/.bashrc</code>.</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>alias y="yarn"
</code></pre></div></div> <p>Now, here is the trick. Install <code class="highlighter-rouge">yarn</code> using <code class="highlighter-rouge">npm</code>, after install <code class="highlighter-rouge">yarn</code> using <code class="highlighter-rouge">yarn</code>, remove <code class="highlighter-rouge">yarn</code> from global npm folder.</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ npm i -g yarn
$ yarn global add yarn
$ npm rm -g yarn
</code></pre></div></div> <p>You can also install <code class="highlighter-rouge">npm</code> with <code class="highlighter-rouge">yarn</code> and remove the original <code class="highlighter-rouge">npm</code>. In this case you have only one global copy of <code class="highlighter-rouge">yarn</code> and <code class="highlighter-rouge">npm</code>.</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ yarn global add npm
</code></pre></div></div> <p>(If you really wanna be sure that the yarn installed npm is gonna work, you can just rename the old npm command to something random and check with <code class="highlighter-rouge">witch npm</code> that your terminal still can see an <code class="highlighter-rouge">npm</code> command.)</p> <p>Now, you can safely ask npm to remove itself from the original node folder.</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ npm rm -g npm
</code></pre></div></div> <p>Advantage of this process, that all your globally installed Node package stays in <code class="highlighter-rouge">yarn</code>’s folder so if you upgrade your Node.js with <code class="highlighter-rouge">nvm</code>, you don’t have to reinstall them again.</p> <p>For example install Prettier with yarn.</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ yarn global add prettier
</code></pre></div></div> <p>Check how many global packages are installed in <code class="highlighter-rouge">npm</code> folder and in <code class="highlighter-rouge">yarn</code>.</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ yarn global list
$ npm ls -g --depth=0
</code></pre></div></div> <p>Yarn should list <code class="highlighter-rouge">npm</code>, <code class="highlighter-rouge">yarn</code>, <code class="highlighter-rouge">prettier</code>, etc… The second command should list empty if you removed all the global packages with <code class="highlighter-rouge">npm rm -g</code>.</p> <p>You can always keep up to date your global packages with one simple command.</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ yarn global upgrade
</code></pre></div></div> <h3 id="on-linux">On Linux</h3> <p>Please avoid to install Node.js with <code class="highlighter-rouge">apt-get</code> on Ubuntu. If you already installed Node.js with the built in package manager, please remove that. (<code class="highlighter-rouge">sudo apt-get purge nodejs &amp;&amp; sudo apt-get autoremove &amp;&amp; sudo apt-get autoclean</code>)</p> <p>The installation process on Linux is the same as on OSX.</p> <p>With the provided script:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.35.00/install.sh | bash
</code></pre></div></div> <p>(Please read the instructions under OSX section.)</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ nvm list
$ nvm ls-remote
$ nvm install 12.13.0
$ nvm use 12.13.0
$ nvm alias default 12.13.0
$ node -v
$ npm install -g npm
$ npm -v
</code></pre></div></div> <p>One more thing! Don’t forget to run the following command, which increases the amount of inotify watches.</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ echo fs.inotify.max_user_watches=524288 | sudo tee -a /etc/sysctl.conf &amp;&amp; sudo sysctl -p
</code></pre></div></div> <h3 id="on-windows">On Windows</h3> <p>On Windows, if you don’t need more version from Node.js, you can use the <a href="https://nodejs.org/en/download/current/">official installer</a>.</p> <p>Install also <a href="https://git-for-windows.github.io/">Git for Windows</a>.</p> <p>Additionally, don’t forget to read <a href="http://ember-cli.com/user-guide/#windows">this instruction</a>, which is very interesting not just for Ember developers, but for everybody who uses Node.js on Windows.</p> <p>Plus install and run <code class="highlighter-rouge">ember-cli-windows</code></p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ npm install -g ember-cli-windows
$ ember-cli-windows
</code></pre></div></div> <p>More here: https://github.com/felixrieseberg/ember-cli-windows</p> <p>Always run your PowerShell or CMD.exe as Administrator.</p> <p>Don’t forget to run these two commands in PowerShell (as Administrator):</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ Set-ExecutionPolicy Unrestricted -scope Process
$ ember-cli-windows
</code></pre></div></div> <p>Log out and log back in Windows.</p> <p>Try to upgrade <code class="highlighter-rouge">npm</code> and after install the latest <code class="highlighter-rouge">ember-cli</code></p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ npm install -g npm
$ npm install -g ember-cli
</code></pre></div></div> <p>I would suggest, experiment with different shells. Which worked better for you? PowerShell, Git Shell, the original CMD.exe? Please, share your Windows experiment in a comment.</p> <blockquote> <p>Now, you have Node.js on your machine, it’s time to go back to the <a href="https://yoember.com">Ember Tutorial</a></p> </blockquote> <div id="disqus_thread"></div> </div> </article> </div> <footer class="blog-footer"> <div class="container"> <div class="row"> <div class="col-sm"><a href="https://yoember.com">Ember.js tutorial</div> <div class="col-sm text-center"><a href="/feed.xml">RSS</a></div> <div class="col-sm text-right"><a href="#">Back to top</a></div> </div> </div> </footer> <script> (function (i, s, o, g, r, a, m) { i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () { (i[r].q = i[r].q || []).push(arguments) }, i[r].l = 1 * new Date(); a = s.createElement(o), m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m) })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga'); ga('create', 'UA-68981696-1', 'auto'); ga('send', 'pageview'); </script> <script> var disqus_config = function () { this.page.url = 'https://yoember.com'; this.page.identifier = document.getElementsByTagName('body')[0].getAttribute('data-identifier') }; (function() { var d = document, s = d.createElement('script'); s.src = '//yoember.disqus.com/embed.js'; s.async = 1; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> </body> </html>
